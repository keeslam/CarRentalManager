# Minimale nixpacks.toml - laat Nixpacks de defaults doen

[variables]
NIXPACKS_NODE_VERSION = "18"

# Installatie: installeer dependencies voor root EN frontend map
[phases.install]
cmds = [
  "npm ci --only=production",           # Root dependencies (backend)
  "cd client && npm ci --only=production"  # Frontend dependencies
]

# Build: bouw eerst frontend, dan eventueel backend
[phases.build]
cmds = [
  "cd client && npm run build",       # Bouw React app (maakt dist/ of build/)
  "npm run build"                       # Optioneel: backend build als die bestaat
]

# Override alleen de start command
[start]
cmd = "npm start"
